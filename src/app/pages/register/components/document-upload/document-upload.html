<div class="document-upload">
  <label class="document-upload__label">{{ label() }}</label>

  <input
    #fileInput
    type="file"
    [accept]="accept()"
    [disabled]="disabled()"
    (change)="onFileSelected($event)"
    class="document-upload__input"
  />

  @if (!selectedFile()) {
    <div
      class="document-upload__dropzone"
      [class.document-upload__dropzone--dragging]="isDragging()"
      [class.document-upload__dropzone--disabled]="disabled()"
      (click)="triggerFileInput()"
      (dragover)="onDragOver($event)"
      (dragleave)="onDragLeave($event)"
      (drop)="onDrop($event)">
      <div class="document-upload__icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
          <polyline points="17 8 12 3 7 8"/>
          <line x1="12" y1="3" x2="12" y2="15"/>
        </svg>
      </div>
      <p class="document-upload__text">
        <span class="document-upload__text-primary">Click to upload</span>
        or drag and drop
      </p>
      <p class="document-upload__hint">JPG, PNG (max 5MB)</p>
    </div>
  } @else {
    <div class="document-upload__preview">
      <img
        [src]="selectedFile()?.previewUrl"
        [alt]="selectedFile()?.fileName"
        class="document-upload__image"
      />
      <div class="document-upload__info">
        <p class="document-upload__filename">{{ selectedFile()?.fileName }}</p>
        <p class="document-upload__filesize">{{ formatFileSize(selectedFile()?.fileSize || 0) }}</p>
      </div>
      <button
        type="button"
        class="document-upload__remove"
        (click)="removeFile()"
        aria-label="Remove file">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"/>
          <line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
      </button>
    </div>
  }

  @if (error()) {
    <p class="document-upload__error">{{ error() }}</p>
  }
</div>
